# 条件概率

下面通过一个示例来解释条件概率的概念。

**例 1：** 假设有 20 个外观相似的郁金香球茎，其中 8 个开花早，12 个开花晚；13 个为红色，7 个为黄色。组合如下：

|           | 早开(E) | 晚开(L) | 总数 |
| --------- | ------- | ------- | ---- |
| 红色（R） | 5       | 8       | 13   |
| 黄色（Y） | 3       | 4       | 7    |
| 总数      | 8       | 12      | 20     |

如果随机选择一个球茎，假设选择每个球茎的概率相同，则根据上表，它为红色郁金香的概率 $P(R)=13/20$。然而，如果通过仔细检查可以判断球茎是早开（E）还是晚开（L）。如果只考虑早开的情况，那么只有 8 种可能结果。即在该限制下，R 的概率为 $5/8$；即事件E 发生的情况下 R 发生的概率 $P(R|E)$ 为：

$$P(R|E)=\frac{5}{8}=\frac{N(R\cap E)}{N(E)}=\frac{N(R\cap E)/20}{N(E)/20}=\frac{P(R\cap E)}{P(E)}$$
其中 $N(R\cap E)$ 和 $N(E)$ 分别为事件 $R\cap E$ 和 $E$ 的结果数。

该例说明了一种常见情况，即出于某些原因，我们只对随机时间样本空间 $S$ 的一个子集 $B$ 感兴趣。现在需要以新的样本空间 $B$ 定义概率函数。即对给定事件 A，只考虑来自 $B$ 的结果，定义 $P(A|B)$。对照上例，如果实验的每种结果是等可能性的，那么；

$$P(A|B)=\frac{N(A\cap B)}{N(B)}$$
其中，$N(A\cap B)$ 和 $N(B)$ 是事件 $A\cap B$ 和事件 $B$ 的可能结果数。分子分母同时除以 $N(S)$ 得到：

$$P(A|B)=\frac{N(A\cap B)/N(S)}{N(B)/N(S)}=\frac{P(A\cap B)}{P(B)}$$
由此得出以下定义。

```ad-summary
title: 条件概率

事件 B 发生条件下，事件 A 的条件概率定义为:

$$P(A|B)=\frac{P(A\cap B)}{P(B)}$$

假设 $P(B)>0$。
```

**例 2：** 设 $P(A)=0.4$, $P(B)=0.5$, $P(A\cap B)=0.3$，那么

$$P(A|B)=\frac{P(A\cap B)}{P(B)}=\frac{0.3}{0.5}=0.6$$
$$P(B|A)=\frac{P(A\cap B)}{P(A)}=\frac{0.3}{0.4}=0.75$$

这里 "给定 B" 或 "B 发生的条件下"，可以看做是指定新的样本空间，计算 $P(A|B)$，就是计算 A 中包含在 B 中那部分的概率。下面通过两个例子来说明这个想法。

**例 3：** 设 $P(A)=0.7$, $P(B)=0.1$, $P(A\cap B)=0.2$，如下图所示。

![[Pasted image 20230605105724.png|400]]

设实验结果属于 B，那么 A 发生的概率是多少？将样本空间显示为 B，对应 $P(B)=0.2$，对应 A 发生的概率 $P(A\cap B)$ 为0.2，所以 A 发生时 B 的概率为 $0.2/0.3=2/3$。从公式定义也能获得相同结果：

$$P(A|B)=\frac{P(A\cap B)}{P(B)}=\frac{0.2}{0.3}=\frac{2}{3}$$
**例 4：** 投掷两个均匀的四面骰子，计算加和。设 A 是加和为 3 的事件，B 为加和为 3 或 5 的事件。那么，条件概率 $P(A|B)$ ，即摇出的加和为 3 或 5，那么要出加和为 3 的概率为：

$$P(A|B)=\frac{P(A\cap B)}{P(B)}=\frac{P(A)}{P(B)}=\frac{2/16}{6/16}=\frac{1}{3}$$
![[Pasted image 20230605111732.png|400]]

如图所示，加和为 3 或 5 的可能性有 6 种，其中加和为 3 的有两种。

可以发现，条件概率满足概率函数公里，即当 $P(B)>0$：

1) $P(A|B)\ge 0$
2) $P(B|B)=1$
3) 如果 $A_1,A_2,A_3,...$ 为互斥事件，那么对正整数 $k$：

$$P(A_1\cup A_2\cup \cdots \cup A_k|B)=P(A_1|B)+P(A_2|B)+\cdots+P(A_k|B)$$
属性 (1) 易证。属性 (2)：

$$P(B|B)=\frac{P(B\cap B)}{P(B)}=\frac{P(B)}{P(B)}=1$$

属性 (3)：

$$\begin{align}
P(A_1\cup A_2\cup\cdots|B)&=\frac{P[(A_1\cup A_2\cup\cdots)\cap B]}{P(B)}\\
&=\frac{P[(A_1\cap B)\cup (A_2\cap B)\cup \cdots]}{P(B)}
\end{align}$$
但是 $(A_1\cap B), (A_2\cap B), \cdots$  也是互斥事件，因此：

$$\begin{align}
P(A_1\cup A_2\cup\cdots|B)&=\frac{P(A_1\cap B)+P(A_2\cap B)+\cdots}{P(B)}\\
&=\frac{P(A_1\cap B)}{P(B)}+\frac{P(A_2\cap B)}{P(B)}+\cdots \\
&=P(A_1|B)+P(A_2|B)+\cdots
\end{align}$$




